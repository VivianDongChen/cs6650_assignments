
============================================================
         CS6650 Assignment 3 - Load Test Summary
============================================================

Configuration:
  RabbitMQ Host:    35.89.16.176:5672
  Consumer Host:    35.161.158.82:8080
  Database:         RDS PostgreSQL 16.6 (db.t3.micro)
  Test Rooms:       20
  Workers:          20

------------------------------------------------------------
Test 1: 500,000 Messages
------------------------------------------------------------
  Messages Sent:    500,000
  Duration:         63.99 seconds
  Throughput:       7,813 messages/second
  Failed:           0
  Success Rate:     100.00%

------------------------------------------------------------
Test 2: 1,000,000 Messages
------------------------------------------------------------
  Messages Sent:    1,000,000
  Duration:         126.91 seconds (2.1 minutes)
  Throughput:       7,880 messages/second
  Failed:           0
  Success Rate:     100.00%

------------------------------------------------------------
Combined Results
------------------------------------------------------------
  Total Sent:       1,500,000 messages
  Total Duration:   190.90 seconds (3.2 minutes)
  Average Throughput: 7,855 messages/second
  Total Failed:     0
  Overall Success:  100.00%

------------------------------------------------------------
Database Verification (Metrics API)
------------------------------------------------------------
  Total Messages in DB:    1,300,001
  Connection Pool Active:  0
  Connection Pool Idle:    11
  Connection Pool Total:   11

  Messages Per Room Distribution:
    Room  1:  70,001 messages
    Room  2:  70,000 messages
    Room  3:  70,000 messages
    Room  4:  70,000 messages
    Room  5:  70,000 messages
    ...  (showing 5 of 20 rooms)

------------------------------------------------------------
Performance Optimizations Implemented
------------------------------------------------------------
  ✓ Indexing Strategy:
      - Primary key on message_id
      - B-tree covering index: (room_id, timestamp)
      - B-tree covering index: (user_id, timestamp)
      - BRIN index on timestamp
      - Composite index: (user_id, room_id, timestamp)

  ✓ Connection Pooling:
      - HikariCP: 10-50 connections
      - Connection timeout: 30 seconds
      - Idle timeout: 10 minutes

  ✓ Query Optimization:
      - Prepared statements throughout
      - 3 materialized views for analytics
      - Batch inserts: 1,000 messages per batch

  ✓ System Resilience:
      - Error handling and logging
      - Health check endpoint: /health
      - Metrics API endpoint: /metrics

============================================================
                 All Tests Passed ✓
============================================================
